!function e(t,n,a){function i(s,l){if(!n[s]){if(!t[s]){var r="function"==typeof require&&require;if(!l&&r)return r(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){var n=t[s][1][e];return i(n?n:e)},d,d.exports,e,t,n,a)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<a.length;s++)i(a[s]);return i}({1:[function(e,t,n){!function(){"use strict";e("./modules/config.js"),e("./modules/ui.js"),e("./modules/builder.js"),e("./modules/utils.js"),e("./modules/canvasElement.js"),e("./modules/styleeditor.js"),e("./modules/content.js"),e("./modules/export.js"),e("./modules/preview.js")}()},{"./modules/builder.js":2,"./modules/canvasElement.js":3,"./modules/config.js":4,"./modules/content.js":5,"./modules/export.js":6,"./modules/preview.js":7,"./modules/styleeditor.js":8,"./modules/ui.js":9,"./modules/utils.js":10}],2:[function(e,t,n){!function(){"use strict";function n(e,t,n){if(this.name=e||"",this.pageID=t.pages_id||0,this.blocks=[],this.parentUL={},this.status="",this.scripts=[],this.pageSettings={title:t.pages_title||"",meta_description:t.meta_description||"",meta_keywords:t.meta_keywords||"",header_includes:t.header_includes||"",page_css:t.page_css||""},this.pageMenuTemplate='<a href="" class="menuItemLink">page</a><span class="pageButtons"><a href="" class="fileEdit fui-new"></a><a href="" class="fileDel fui-cross"><a class="btn btn-xs btn-primary btn-embossed fileSave fui-check" href="#"></a></span></a></span>',this.menuItem={},this.linksDropdownItem={},this.parentUL=document.createElement("UL"),this.parentUL.setAttribute("id","page"+n),this.selectPage=function(){l.deActivateAll(),$(this.menuItem).addClass("active"),l.setActive(this),l.pageTitle.innerHTML=this.name,$("body").trigger("changePage");for(var e in this.blocks)Object.keys(this.blocks[e].frameDocument).length>0&&this.blocks[e].heightAdjustment();this.isEmpty()},this.setPosition=function(e,t){for(var n in this.blocks)this.blocks[n].frame.getAttribute("id")===e&&this.blocks.splice(t,0,this.blocks.splice(n,1)[0])},this.deleteBlock=function(e){for(var t in this.blocks)this.blocks[t]===e&&this.blocks.splice(t,1);l.setPendingChanges(!0)},this.toggleFrameCovers=function(e){for(var t in this.blocks)this.blocks[t].toggleCover(e)},this.editPageName=function(){if(!this.menuItem.classList.contains("edit")){this.menuItem.querySelector("a.menuItemLink").setAttribute("style","display:none");var e=document.createElement("input");e.type="text",e.setAttribute("name","page"),e.setAttribute("value",this.name),this.menuItem.insertBefore(e,this.menuItem.firstChild),e.focus();var t=e.getAttribute("value");e.setAttribute("value",""),e.setAttribute("value",t),this.menuItem.classList.add("edit")}},this.updatePageNameEvent=function(e){if(this.menuItem.classList.contains("edit")){var t=this.menuItem.querySelector('input[name="page"]');l.checkPageName(t.value)?(this.name=l.prepPageName(t.value),t.parentNode.removeChild(t),this.menuItem.querySelector("a.menuItemLink").innerHTML=this.name,this.menuItem.querySelector("a.menuItemLink").setAttribute("style","display:block"),this.menuItem.classList.remove("edit"),this.linksDropdownItem.text=this.name,this.linksDropdownItem.setAttribute("value",this.name+".html"),l.pageTitle.innerHTML=this.name,l.setPendingChanges(!0)):alert(l.pageNameError)}},this["delete"]=function(){for(var e in l.sitePages)l.sitePages[e]===this&&(l.sitePages.splice(e,1),this.parentUL.remove(),l.pagesToDelete.push(this.name),this.menuItem.remove(),this.linksDropdownItem.remove(),l.sitePages[0].selectPage(),l.setPendingChanges(!0))},this.isEmpty=function(){0===this.blocks.length?(l.messageStart.setAttribute("style","display:block"),l.divFrameWrapper.classList.add("empty")):(l.messageStart.setAttribute("style","display:none"),l.divFrameWrapper.classList.remove("empty"))},this.prepForSave=function(){var e={};e.blocks=[];for(var t=0;t<this.blocks.length;t++){var n={};this.blocks[t].sandbox?(n.frames_content=$("#sandboxes #"+this.blocks[t].sandbox).contents().find(o.pageContainer).html(),n.frames_sandbox=this.blocks[t].sandbox,n.frames_loaderFunction=this.blocks[t].sandbox_loader):(n.frames_content=this.blocks[t].frameDocument.documentElement.querySelector("#page").innerHTML,n.frames_sandbox="",n.frames_loaderFunction=""),n.frames_height=this.blocks[t].frameHeight,n.frames_original_url=this.blocks[t].originalUrl,e.blocks.push(n)}return e},this.fullPage=function(){var e=this;e.scripts=[];var t=$("iframe#skeleton").contents().find(o.pageContainer);$("iframe#skeleton").contents().find(o.pageContainer).html("");var n;for(var a in this.blocks){n=this.blocks[a].sandbox!==!1?$("#sandboxes #"+this.blocks[a].sandbox).contents().find(o.pageContainer).clone():$(this.blocks[a].frameDocument.body).find(o.pageContainer).clone(),n.find(".frameCover").each(function(){$(this).remove()}),n.find(".videoWrapper").each(function(){var e=$(this).contents();$(this).replaceWith(e)});for(var i in o.editableItems)n.find(i).each(function(){$(this).removeAttr("data-selector"),$(this).css("outline",""),$(this).css("outline-offset",""),$(this).css("cursor",""),""===$(this).attr("style")&&$(this).removeAttr("style")});for(var s=0;s<o.editableContent.length;++s)n.find(o.editableContent[s]).each(function(){$(this).removeAttr("data-selector")});t.append($(n.html()));var l=$(this.blocks[a].frameDocument.body).find("script"),r=document.getElementById("skeleton");l.size()>0&&l.each(function(){var t;""!==$(this).text()?(t=r.contentWindow.document.createElement("script"),t.type="text/javascript",t.innerHTML=$(this).text()):null!==$(this).attr("src")&&-1===e.scripts.indexOf($(this).attr("src"))&&(t=r.contentWindow.document.createElement("script"),t.type="text/javascript",t.src=$(this).attr("src"))})}},this.clear=function(){for(var e=this.blocks.pop();void 0!==e;)e["delete"](),e=this.blocks.pop()},t.hasOwnProperty("blocks"))for(var i=0;i<t.blocks.length;i++){var r=new a;t.blocks[i].src=t.blocks[i].frames_original_url,""!=t.blocks[i].frames_sandbox&&(r.sandbox=t.blocks[i].frames_sandbox,r.sandbox_loader=t.blocks[i].frames_loaderFunction),r.frameID=t.blocks[i].frames_id,r.createParentLI(t.blocks[i].frames_height),r.createFrame(t.blocks[i]),r.createFrameCover(),r.insertBlockIntoDom(this.parentUL),r.contentAfterLoad=t.blocks[i].frames_content,this.blocks.push(r)}l.sitePages.push(this),l.divCanvas.appendChild(this.parentUL);var c=this;$(this.parentUL).sortable({revert:!0,placeholder:"drop-hover",stop:function(){l.setPendingChanges(!0)},beforeStop:function(e,t){var n,i=t.item.attr("data-frames");if("undefined"!=typeof i&&i!==!1){$("#start").hide(),c.clear();for(var o=t.item.attr("data-frames").split("-"),r=t.item.attr("data-heights").split("-"),d=(t.item.attr("data-originalurls").split("-"),0);d<o.length;d++){n=new a,n.createParentLI(r[d]);var m={};m.src="sites/getframe/"+o[d],m.frames_original_url="sites/getframe/"+o[d],m.frames_height=r[d],n.createFrame(m),n.createFrameCover(),n.insertBlockIntoDom(c.parentUL),c.blocks.push(n),l.setPendingChanges(!0)}s.templateID=t.item.attr("data-pageid"),t.item.html(null),$("body .ui-sortable-helper").remove()}else if(t.item.find(".frameCover > button").size()>0){var u=t.item.find("iframe").attr("id"),p=t.item.index();l.activePage.setPosition(u,p)}else n=new a,n.placeOnCanvas(t)},start:function(e,t){0!==t.item.find(".frameCover").size()&&(s.frameContents=t.item.find("iframe").contents().find(o.pageContainer).html())},over:function(){$("#start").hide()}}),this.menuItem=document.createElement("LI"),this.menuItem.innerHTML=this.pageMenuTemplate,$(this.menuItem).find("a:first").text(e).attr("href","#page"+n);$(this.menuItem).find("a:first").get(0);this.menuItem.addEventListener("click",this,!1),this.menuItem.querySelector("a.fileEdit").addEventListener("click",this,!1),this.menuItem.querySelector("a.fileSave").addEventListener("click",this,!1),this.menuItem.querySelector("a.fileDel").addEventListener("click",this,!1);var d=this.menuItem.querySelector("a.fileDel");1===n&&d.parentNode.removeChild(d),this.linksDropdownItem=document.createElement("OPTION"),this.linksDropdownItem.setAttribute("value",e+".html"),this.linksDropdownItem.text=e,s.dropdownPageLinks.appendChild(this.linksDropdownItem),l.pagesMenu.appendChild(this.menuItem)}function a(){this.frameID=0,this.sandbox=!1,this.sandbox_loader="",this.status="",this.originalUrl="",this.parentLI={},this.frameCover={},this.frame={},this.frameDocument={},this.frameHeight=0,this.annot={},this.annotTimeout={},this.contentAfterLoad="",this.createParentLI=function(e){this.parentLI=document.createElement("LI"),this.parentLI.setAttribute("class","element")},this.createFrame=function(e){if(this.frame=document.createElement("IFRAME"),this.frame.setAttribute("frameborder",0),this.frame.setAttribute("scrolling",0),this.frame.setAttribute("src",e.src),this.frame.setAttribute("data-originalurl",e.frames_original_url),this.originalUrl=e.frames_original_url,this.frame.setAttribute("style","background: #444 url('images/loader.svg') 50% 50% no-repeat"),$(this.frame).uniqueId(),this.sandbox!==!1){this.frame.setAttribute("data-loaderfunction",this.sandbox_loader),this.frame.setAttribute("data-sandbox",this.sandbox);var t=$('<iframe src="'+e.src+'" id="'+this.sandbox+'" sandbox="allow-same-origin"></iframe>');$("#sandboxes").append(t)}},this.insertBlockIntoDom=function(e){this.parentLI.appendChild(this.frame),e.appendChild(this.parentLI),this.frame.addEventListener("load",this,!1)},this.setFrameDocument=function(){this.frame.contentDocument?this.frameDocument=this.frame.contentDocument:this.frameDocument=this.frame.contentWindow.document,$("iframe").contents().find("html").addClass("html-overflow")},this.createFrameCover=function(){this.frameCover=document.createElement("DIV"),this.frameCover.classList.add("frameCover"),this.frameCover.classList.add("fresh"),this.frameCover.style.height=this.frameHeight+"px";var e=document.createElement("BUTTON");e.setAttribute("class","btn btn-danger deleteBlock"),e.setAttribute("type","button"),e.innerHTML='<span class="fui-trash"></span> remove',e.addEventListener("click",this,!1);var t=document.createElement("BUTTON");t.setAttribute("class","btn btn-warning resetBlock"),t.setAttribute("type","button"),t.innerHTML='<i class="fa fa-refresh"></i> reset',t.addEventListener("click",this,!1);var n=document.createElement("BUTTON");n.setAttribute("class","btn btn-inverse htmlBlock"),n.setAttribute("type","button"),n.innerHTML='<i class="fa fa-code"></i> source',n.addEventListener("click",this,!1),this.frameCover.appendChild(e),this.frameCover.appendChild(t),this.frameCover.appendChild(n),this.parentLI.appendChild(this.frameCover)},this.heightAdjustment=function(){var e=this.frameDocument.body,t=this;setTimeout(function(){var n=e.offsetHeight;t.frame.style.height=n+"px",t.parentLI.style.height=n+"px",t.frameCover.style.height=n+"px",t.frameHeight=n},500)},this["delete"]=function(){$(this.frame.parentNode).fadeOut(500,function(){this.remove(),l.activePage.isEmpty()}),l.activePage.deleteBlock(this),this.sanbdox&&document.getElementById(this.sandbox).remove(),l.setPendingChanges(!0)},this.reset=function(){if(this.frame.contentWindow.location.reload(),this.sandbox){document.getElementById(this.sandbox).contentWindow.location.reload()}l.setPendingChanges(!0)},this.source=function(){this.frame.setAttribute("style","display:none"),$(this.parentLI.parentNode).sortable("disable");var e=document.createElement("DIV");e.classList.add("aceEditor"),$(e).uniqueId();var t=this.parentLI.style.height,n=t.split("px");n[0]<350&&this.parentLI.setAttribute("style","height:350px"),this.parentLI.appendChild(e);var a=document.createElement("LI"),i=document.createElement("DIV");i.classList.add("errorDrawer"),i.setAttribute("id","div_errorDrawer"),i.innerHTML='<button type="button" class="btn btn-xs btn-embossed btn-default button_clearErrorDrawer" id="button_clearErrorDrawer">CLEAR</button>',a.appendChild(i),i.querySelector("button").addEventListener("click",this,!1),this.parentLI.parentNode.insertBefore(a,this.parentLI.nextSibling);var l=e.getAttribute("id"),r=ace.edit(l),c=this.frameDocument.querySelector(o.pageContainer),d=this.frame.getAttribute("data-sandbox");this.frame.getAttribute("data-loaderfunction");if("object"!=typeof d&&"startSlideshow"===this.frame.getAttribute("data-loaderfunction"))var m=$("#sandboxes #"+d).contents().find(o.pageContainer).html();else var m=c.innerHTML;r.setValue(m),r.setTheme("ace/theme/twilight"),r.getSession().setMode("ace/mode/html");var u=this;r.getSession().on("changeAnnotation",function(){u.annot=r.getSession().getAnnotations(),clearTimeout(u.annotTimeout);var e;e=0===$("#div_errorDrawer p").size()?o.sourceCodeEditSyntaxDelay:100,u.annotTimeout=setTimeout(function(){for(var e in u.annot)if(u.annot.hasOwnProperty(e)&&"Start tag seen without seeing a doctype first. Expected e.g. <!DOCTYPE html>."!==u.annot[e].text){var t=$("<p></p>"),n=$("<b>"+u.annot[e].type+": </b>"),a=$("<span> "+u.annot[e].text+"on line  <b>"+u.annot[e].row+"</b></span>");t.append(n),t.append(a),$("#div_errorDrawer").append(t)}"none"===$("#div_errorDrawer").css("display")&&$("#div_errorDrawer").find("p").size()>0&&$("#div_errorDrawer").slideDown()},e)});var p=document.createElement("BUTTON");p.setAttribute("type","button"),p.classList.add("btn"),p.classList.add("btn-danger"),p.classList.add("editCancelButton"),p.classList.add("btn-wide"),p.innerHTML='<span class="fui-cross editCancelButton"></span> Cancel',p.addEventListener("click",this,!1);var g=document.createElement("BUTTON");g.setAttribute("type","button"),g.classList.add("btn"),g.classList.add("btn-primary"),g.classList.add("editSaveButton"),g.classList.add("btn-wide"),g.innerHTML='<span class="fui-check editSaveButton"></span> Save',g.addEventListener("click",this,!1);var f=document.createElement("DIV");f.classList.add("editorButtons"),f.appendChild(p),f.appendChild(g),this.parentLI.appendChild(f),s.aceEditors[l]=r},this.cancelSourceBlock=function(){if($(this.parentLI.parentNode).sortable("enable"),$(this.parentLI.nextSibling).remove(),this.parentLI.querySelector(".aceEditor").remove(),$(this.frame).fadeIn(500),$(this.parentLI.querySelector(".editorButtons")).fadeOut(500,function(){$(this).remove()}),this.heightAdjustment(),this.frameDocument.querySelector("section")){var e=this.frameDocument.querySelector("section").getAttribute("id");if(void 0!=e){var t=e.substring(0,7),n=this.frame.id;"counter"==t?document.getElementById(n).contentWindow.LoadCounter():"object"!=typeof this.frame.getAttribute("data-sandbox")&&"startSlideshow"===this.frame.getAttribute("data-loaderfunction")&&(document.getElementById(n).contentWindow.LoadOwlSlider(),document.getElementById(n).contentWindow.LoadIsotope(),document.getElementById(n).contentWindow.LoadLightboxInit())}}},this.saveSourceBlock=function(){$(this.parentLI.parentNode).sortable("enable");var e=this.parentLI.querySelector(".aceEditor").getAttribute("id"),t=s.aceEditors[e].getValue();document.getElementById("div_errorDrawer").parentNode.remove(),this.parentLI.querySelector(".aceEditor").remove(),this.frameDocument.querySelector(o.pageContainer).innerHTML=t,this.frame.setAttribute("style","display:block");var n=this.frame.getAttribute("data-sandbox");if("object"!=typeof n&&"startSlideshow"===this.frame.getAttribute("data-loaderfunction")&&$("#sandboxes #"+n).contents().find(o.pageContainer).html(t),$(this.parentLI.querySelector(".editorButtons")).fadeOut(500,function(){$(this).remove()}),this.heightAdjustment(),l.setPendingChanges(!0),this.status="changed",this.frameDocument.querySelector("section")){var a=this.frameDocument.querySelector("section").getAttribute("id");if(void 0!=a){var i=a.substring(0,7),r=this.frame.id;"counter"==i?document.getElementById(r).contentWindow.LoadCounter():"object"!=typeof n&&"startSlideshow"===this.frame.getAttribute("data-loaderfunction")&&(document.getElementById(r).contentWindow.LoadOwlSlider(),document.getElementById(r).contentWindow.LoadIsotope(),document.getElementById(r).contentWindow.LoadLightboxInit())}}},this.clearErrorDrawer=function(){for(var e=this.parentLI.nextSibling.querySelectorAll("p"),t=0;t<e.length;t++)e[t].remove()},this.toggleCover=function(e){"On"===e?this.parentLI.querySelector(".frameCover").setAttribute("style","display:block"):"Off"===e&&this.parentLI.querySelector(".frameCover").setAttribute("style","display:none")},this.getSource=function(){var e="<html>";return e+=this.frameDocument.head.outerHTML,e+=this.frameDocument.body.outerHTML},this.setSource=function(e){var t=$(this.frame).attr("data-sandbox");""!=t?$(this.frame).each(function(){var n=($(this).contents().find("#page").html(e),$(this).attr("id"));$(this).attr("src");document.getElementById(n).contentWindow.LoadOwlSlider(),document.getElementById(n).contentWindow.LoadIsotope(),document.getElementById(n).contentWindow.LoadLightboxInit(),document.getElementById(n).contentWindow.LoadCounter(),$("#sandboxes").find("iframe").each(function(){$("#sandboxes #"+t).contents().find("#page").html(e)})}):$(this.frame).contents().find("#page").html(e)},this.placeOnCanvas=function(e){var t,n={};e.item.find("iframe").size()>0?(n.src=e.item.find("iframe").attr("src"),n.frames_original_url=e.item.find("iframe").attr("src"),n.frames_height=e.item.height(),t=e.item.find("iframe").attr("sandbox"),"undefined"!=typeof t&&t!==!1&&(this.sandbox=i.getRandomArbitrary(1e4,1e9),this.sandbox_loader=e.item.find("iframe").attr("data-loaderfunction"))):(n.src=e.item.find("img").attr("data-srcc"),n.frames_original_url=e.item.find("img").attr("data-srcc"),n.frames_height=e.item.find("img").attr("data-height"),t=e.item.find("img").attr("data-sandbox"),"undefined"!=typeof t&&t!==!1&&(this.sandbox=i.getRandomArbitrary(1e4,1e9),this.sandbox_loader=e.item.find("img").attr("data-loaderfunction"))),this.frameID=0,this.parentLI=e.item.get(0),this.parentLI.innerHTML="",this.status="new",this.createFrame(n),this.parentLI.style.height=this.frameHeight+"px",this.createFrameCover(),this.frame.addEventListener("load",this),e.item.append($(this.frame)),l.activePage.blocks.splice(e.item.index(),0,this),e.item.find("iframe").trigger("canvasupdated"),l.setPendingChanges(!0)}}var i=e("./utils.js"),o=e("./config.js"),s=(e("./ui.js").appUI,{allBlocks:{},menuWrapper:document.getElementById("menu"),primarySideMenuWrapper:document.getElementById("main"),buttonBack:document.getElementById("backButton"),buttonBackConfirm:document.getElementById("leavePageButton"),siteBuilderModes:document.getElementById("siteBuilderModes"),aceEditors:{},frameContents:"",templateID:0,radioBlockMode:document.getElementById("modeBlock"),modalDeleteBlock:document.getElementById("deleteBlock"),modalResetBlock:document.getElementById("resetBlock"),modalDeletePage:document.getElementById("deletePage"),buttonDeletePageConfirm:document.getElementById("deletePageConfirm"),dropdownPageLinks:document.getElementById("internalLinksDropdown"),tempFrame:{},init:function(){$.getJSON("elements.json?v=12345678",function(e){s.allBlocks=e,s.implementBlocks()}),$(this.menuWrapper).on("mouseenter",function(){$(this).stop().animate({left:"0px"},500)}).on("mouseleave",function(){$(this).stop().animate({left:"-220px"},500),$("#menu #main a").removeClass("active"),$(".menu .second").stop().animate({width:0},500,function(){$("#menu #second").hide()})}).animate({left:"-220x"},500);var e=$("#pageTitle").text();$.jStorage.deleteKey(e),localStorage.removeItem("fox_b_seo_"+e),$(this.primarySideMenuWrapper).on("click","a:not(.actionButtons)",function(e){e.preventDefault()}),$(this.buttonBack).on("click",this.backButton),$(this.buttonBackConfirm).on("click",this.backButtonConfirm),$(window).bind("beforeunload",function(){return l.pendingChanges===!0?"Your site contains changed which haven't been saved yet. Are you sure you want to leave?":void 0}),$(this.radioBlockMode).radiocheck("check").on("click",this.activateBlockMode)},implementBlocks:function(){var e,t;for(var n in this.allBlocks.elements){var a=n.toLowerCase().replace(" ","_");$('<li><a href="" id="'+a+'">'+n+"</a></li>").appendTo("#menu #main ul#elementCats");for(var i=0;i<this.allBlocks.elements[n].length;i++){null===this.allBlocks.elements[n][i].thumbnail?(this.allBlocks.elements[n][i].sandbox?(this.allBlocks.elements[n][i].loaderFunction&&(t='data-loaderfunction="'+this.allBlocks.elements[n][i].loaderFunction+'"'),e=$('<li class="element '+a+'"><iframe src="'+this.allBlocks.elements[n][i].url+'" scrolling="no" sandbox="allow-same-origin"></iframe></li>')):e=$('<li class="element '+a+'"><iframe src="about:blank" scrolling="no"></iframe></li>'),e.find("iframe").uniqueId(),e.find("iframe").attr("src",this.allBlocks.elements[n][i].url)):this.allBlocks.elements[n][i].sandbox?(this.allBlocks.elements[n][i].loaderFunction&&(t='data-loaderfunction="'+this.allBlocks.elements[n][i].loaderFunction+'"'),e=$('<li class="element '+a+'"><img src="'+this.allBlocks.elements[n][i].thumbnail+'" data-srcc="'+this.allBlocks.elements[n][i].url+'" data-height="'+this.allBlocks.elements[n][i].height+'" data-sandbox="" '+t+"></li>")):e=$('<li class="element '+a+'"><img src="'+this.allBlocks.elements[n][i].thumbnail+'" data-srcc="'+this.allBlocks.elements[n][i].url+'" data-height="'+this.allBlocks.elements[n][i].height+'"></li>'),e.appendTo("#menu #second ul#elements");var o;o=this.allBlocks.elements[n][i].height?.25*this.allBlocks.elements[n][i].height:"auto",e.find("iframe").zoomer({zoom:.25,width:270,height:o,message:"Drag&Drop Me!"})}}s.makeDraggable()},backButton:function(){return l.pendingChanges===!0?($("#backModal").modal("show"),!1):void 0},backButtonConfirm:function(){l.pendingChanges=!1},activateBlockMode:function(){l.activePage.toggleFrameCovers("On"),$("body").trigger("modeBlocks")},makeDraggable:function(){$("#elements li, #templates li").each(function(){$(this).draggable({helper:function(){return $('<div style="height: 100px; width: 300px; background: #F9FAFA; box-shadow: 5px 5px 1px rgba(0,0,0,0.1); text-align: center; line-height: 100px; font-size: 28px; color: #16A085"><span class="fui-list"></span></div>')},revert:"invalid",appendTo:"body",connectToSortable:"#pageList > ul",start:function(){$("input:radio[name=mode]").parent().addClass("disabled"),$("input:radio[name=mode]#modeBlock").radiocheck("check")}})}),$("#elements li a").each(function(){$(this).unbind("click").bind("click",function(e){e.preventDefault()})})},populateCanvas:function(){var e;if(Object.keys(l.pages).length>0){var t=s.siteBuilderModes.querySelectorAll('input[type="radio"]');for(e=0;e<t.length;e++)t[e].removeAttribute("disabled")}var a=1;for(e in l.pages){new n(e,l.pages[e],a);a++}l.sitePages.length>0&&l.sitePages[0].selectPage(),l.isEmpty()}});$(document).ready(function(){$(".scrollbar-inner").niceScroll({cursorcolor:"#f39c12",cursoropacitymin:0,cursoropacitymax:.8,cursorborderradius:"4px",scrollspeed:70,cursorborder:"none",autohidemode:"leave",cursorwidth:"4px",mousescrollstep:70,railpadding:{top:10,right:2,left:0,bottom:10}})}),$(document).on("click","#seoButton",function(e){$("#fox_b_seo_page_Title").val(""),$("#fox_b_seo_metaDescription").val(""),$("#fox_b_seo_metaKeywords").val(""),$("#fox_b_seo_header").val(""),$("#fox_b_seo_title").text($("#pageTitle").text()+".html");var t=$("#pageTitle").text(),n=$.jStorage.get("fox_b_seo_"+t);n&&($("#fox_b_seo_page_Title").val(n[0]),$("#fox_b_seo_metaDescription").val(n[1]),$("#fox_b_seo_metaKeywords").val(n[2]),$("#fox_b_seo_header").val(n[3]))}),$(document).on("click","#seoSubmittButton",function(e){var t=[$("#fox_b_seo_page_Title").val(),$("#fox_b_seo_metaDescription").val(),$("#fox_b_seo_metaKeywords").val(),$("#fox_b_seo_header").val()],n=$("#pageTitle").text();$.jStorage.set("fox_b_seo_"+n,t,"");localStorage["fox_b_seo_"+n]=JSON.stringify(t)}),$(document).on("click","#exportPage",function(e){$("#fox_b_email").val(""),$("#fox_b_email_from").val(""),$("#fox_b_subject").val(""),$("#mailchimp_api_key").val(""),$("#mailchimp_api_listid").val(""),$("#cm_api_key").val(""),$("#cm_list_id").val(""),$("#getresponse_api_key").val(""),$("#getresponse_campaign_token").val(""),$("#aweber_list_name").val(""),$("#ac_api_url").val(""),$("#ac_api_key").val(""),$("#ac_api_listid").val(""),$("#ml_api_key").val(""),$("#ml_groupid").val(""),$("#g-recaptcha").val("");var t=$.jStorage.get("fox_b_api_values"),n=$.jStorage.get("fox_b_export");if(n)$("#export_type").val(n),$(".export-content").find(".export_change_type").removeClass("active"),$(".export-content").find(".export_change_type").css("display","none"),$(".export-content").find("#"+n).addClass("active"),$(".export-content").find("#"+n).css("display","block");else{var n="fox_b_aweber";$("#export_type").val(n),$(".export-content").find(".export_change_type").removeClass("active"),$(".export-content").find(".export_change_type").css("display","none"),$(".export-content").find("#"+n).addClass("active"),$(".export-content").find("#"+n).css("display","block")}t&&($("#fox_b_email").val(t[0]),$("#fox_b_email_from").val(t[1]),$("#fox_b_subject").val(t[2]),$("#mailchimp_api_key").val(t[3]),$("#mailchimp_api_listid").val(t[4]),$("#cm_api_key").val(t[5]),$("#cm_list_id").val(t[6]),$("#getresponse_api_key").val(t[7]),$("#getresponse_campaign_token").val(t[8]),$("#aweber_list_name").val(t[9]),$("#ac_api_url").val(t[10]),$("#ac_api_key").val(t[11]),$("#ac_api_listid").val(t[12]),$("#ml_api_key").val(t[13]),$("#ml_groupid").val(t[14]),$("#g-recaptcha").val(t[15]))}),$(document).on("click","#exportSave",function(e){var t=$("#export_type").val(),n=[$("#fox_b_email").val(),$("#fox_b_email_from").val(),$("#fox_b_subject").val(),$("#mailchimp_api_key").val(),$("#mailchimp_api_listid").val(),$("#cm_api_key").val(),$("#cm_list_id").val(),$("#getresponse_api_key").val(),$("#getresponse_campaign_token").val(),$("#aweber_list_name").val(),$("#ac_api_url").val(),$("#ac_api_key").val(),$("#ac_api_listid").val(),$("#ml_api_key").val(),$("#ml_groupid").val(),$("#g-recaptcha").val()];$.jStorage.set("fox_b_api_values",n,""),$.jStorage.set("fox_b_export",t,"");localStorage.fox_b_api_values=JSON.stringify(n),localStorage.fox_b_export_values=JSON.stringify(t)}),$("#export_type").change(function(){var e=$(this).val();$(".export-content").find(".export_change_type").removeClass("active"),$(".export-content").find(".export_change_type").css("display","none"),$(".export-content").find("#"+e).addClass("active"),$(".export-content").find("#"+e).css("display","block")}),$("#social_network").change(function(){var e=$(this).val();$(".social-content").find(".export_change_type").removeClass("active"),$(".social-content").find(".export_change_type").css("display","none"),$(".social-content").find("#"+e).addClass("active"),$(".social-content").find("#"+e).css("display","block")}),$(document).on("click","#savefile",function(e){var t,n={};if(0!==l.sitePages[0].blocks.length){for(var a=0;a<l.sitePages.length;a++)0!==l.sitePages[a].blocks.length?n[l.sitePages[a].name]=l.sitePages[a].prepForSave():n[l.sitePages[a].name]="empty";t={pages:n}}else t={"delete":!0};$("#fox-b-save").val(JSON.stringify(t))}),$(document).on("click",".browse",function(){var e=$(this).parent().parent().parent().find(".file-upload");e.trigger("click")}),$("#file").change(function(){var e=$(this).val();$("#file-name").val(e)}),$(document).on("click","#expPage",function(e){$("#file-name").val(""),$("#file").val("")}),$("#import-site").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$("#file").val();$("#file-name").val(t);var n=t.substr(t.lastIndexOf(".")+1);if("json"!=n)alert("You can only Import JSON file which is saved from builder.");else{var a=$("form#import-form"),i=!1;window.FormData&&(i=new FormData(a[0]));var o=a.attr("action");$.ajax({url:o,data:i?i:a.serialize(),cache:!1,contentType:!1,processData:!1,type:"POST"}).done(function(e){l.setPendingChanges(!1),$("body").removeClass("modal-open").attr("style",""),$.jStorage.set("site-flag",1,""),location.reload()})}}),n.prototype.handleEvent=function(e){switch(e.type){case"click":if(e.target.classList.contains("fileEdit"))this.editPageName();else if(e.target.classList.contains("fileSave"))this.updatePageNameEvent(e.target);else if(e.target.classList.contains("fileDel")){var t=this;$(s.modalDeletePage).modal("show"),$(s.modalDeletePage).off("click","#deletePageConfirm").on("click","#deletePageConfirm",function(){t["delete"](),$(s.modalDeletePage).modal("hide")})}else this.selectPage()}},a.prototype.handleEvent=function(e){switch(e.type){case"load":this.setFrameDocument(),this.heightAdjustment(),""!==this.contentAfterLoad&&this.setSource(this.contentAfterLoad),$(this.frameCover).removeClass("fresh",500);break;case"click":var t=this;e.target.classList.contains("deleteBlock")?($(s.modalDeleteBlock).modal("show"),$(s.modalDeleteBlock).off("click","#deleteBlockConfirm").on("click","#deleteBlockConfirm",function(){t["delete"](e),$(s.modalDeleteBlock).modal("hide")})):e.target.classList.contains("resetBlock")?($(s.modalResetBlock).modal("show"),$(s.modalResetBlock).off("click","#resetBlockConfirm").on("click","#resetBlockConfirm",function(){t.reset(),$(s.modalResetBlock).modal("hide")})):e.target.classList.contains("htmlBlock")?t.source():e.target.classList.contains("editCancelButton")?t.cancelSourceBlock():e.target.classList.contains("editSaveButton")?t.saveSourceBlock():e.target.classList.contains("button_clearErrorDrawer")&&t.clearErrorDrawer()}};var l={pendingChanges:!1,pages:{},is_admin:0,data:{},pagesToDelete:[],sitePages:[],sitePagesReadyForServer:{},activePage:{},pageTitle:document.getElementById("pageTitle"),divCanvas:document.getElementById("pageList"),pagesMenu:document.getElementById("pages"),buttonNewPage:document.getElementById("addPage"),liNewPage:document.getElementById("newPageLI"),inputPageSettingsTitle:document.getElementById("pageData_title"),inputPageSettingsMetaDescription:document.getElementById("pageData_metaDescription"),inputPageSettingsMetaKeywords:document.getElementById("pageData_metaKeywords"),inputPageSettingsIncludes:document.getElementById("pageData_headerIncludes"),inputPageSettingsPageCss:document.getElementById("pageData_headerCss"),buttonSubmitPageSettings:document.getElementById("pageSettingsSubmittButton"),modalPageSettings:document.getElementById("pageSettingsModal"),buttonSave:document.getElementById("savePage"),messageStart:document.getElementById("start"),divFrameWrapper:document.getElementById("frameWrapper"),skeleton:document.getElementById("skeleton"),buttonEmptyPage:document.getElementById("clearScreen"),actionButtons:document.querySelectorAll(".actionButtons"),autoSaveTimer:{},init:function(){var e=$.jStorage.get("site-flag");if(1==e)var t="builder.json?nocache="+(new Date).getTime();else var t="site.json?nocache="+(new Date).getTime();$.getJSON(t,function(t){void 0!==t.pages?l.pages=t.pages:l.pages={index:{blocks:[],page_id:1,pages_title:"",meta_description:"",meta_keywords:"",header_includes:"",page_css:""}},$("body").trigger("siteDataLoaded"),s.populateCanvas(),1==e&&$.jStorage.deleteKey("site-flag")}),$(this.buttonNewPage).on("click",l.newPage),$(this.modalPageSettings).on("show.bs.modal",l.loadPageSettings),$(this.buttonSubmitPageSettings).on("click",l.updatePageSettings),$(this.buttonSave).on("click",function(){l.save(!0)}),$(this.buttonEmptyPage).on("click",l.emptyPage),this.autoSaveTimer=setTimeout(l.autoSave,o.autoSaveTimeout)},setPendingChanges:function(e){this.pendingChanges=e,this.isEmpty(),e===!0?(window.clearInterval(this.autoSaveTimer),this.autoSaveTimer=setTimeout(l.autoSave,o.autoSaveTimeout),$("#savePage .bLabel").text("Save now (!)"),"new"!==l.activePage.status&&(l.activePage.status="changed")):($("#savePage .bLabel").text("Nothing to save!"),l.updatePageStatus(""))},save:function(e){$("a#savePage").addClass("disabled");var t=($("a#savePage").find(".bLabel").text(),$("a#savePage").find(".bLabel").attr("data-alt-text"));$("a#savePage").find(".bLabel").text(t),
$("a#savePage").addClass("disabled");var n,a={};if(0!==l.sitePages[0].blocks.length){for(var i=0;i<l.sitePages.length;i++)0!==l.sitePages[i].blocks.length?a[l.sitePages[i].name]=l.sitePages[i].prepForSave():a[l.sitePages[i].name]="empty";n={pages:a}}else n={"delete":!0};$("#errorModal .modal-body > *, #successModal .modal-body > *").each(function(){$(this).remove()}),$.ajax({url:"_save.php",method:"POST",data:{data:n},dataType:"json"}).done(function(t){$("a#savePage").removeClass("disabled"),0===t.responseCode?e&&($("#errorModal .modal-body").html(t.responseHTML),$("#errorModal").modal("show")):1===t.responseCode&&(l.setPendingChanges(!1),$("body").trigger("changePage"))})},prepForSave:function(e){if(this.sitePagesReadyForServer={},e)this.sitePagesReadyForServer[this.activePage.name]=this.activePage.prepForSave(),this.activePage.fullPage();else for(var t=0;t<this.sitePages.length;t++)""!==this.sitePages[t].status&&(this.sitePagesReadyForServer[this.sitePages[t].name]=this.sitePages[t].prepForSave())},setActive:function(e){this.activePage=e;for(var t in this.sitePages)this.sitePages[t].parentUL.setAttribute("style","display:none");var n=this.activePage.parentUL.id;$("#"+n).css("display","block")},deActivateAll:function(){for(var e=this.pagesMenu.querySelectorAll("li"),t=0;t<e.length;t++)e[t].classList.remove("active")},newPage:function(){l.deActivateAll();var e=[],t={pages_id:0};e[0]=t;var a="page"+(l.sitePages.length+1),i=new n(a,e,l.sitePages.length+1);i.status="new",i.selectPage(),i.editPageName(),i.isEmpty(),l.setPendingChanges(!0)},checkPageName:function(e){for(var t in this.sitePages)if(this.sitePages[t].name===e&&this.activePage!==this.sitePages[t])return this.pageNameError="The page name must be unique.",!1;return!0},prepPageName:function(e){return e=e.replace(" ",""),e=e.replace(/[?*!.|&#;$%@"<>()+,]/g,"")},updatePageSettings:function(){l.activePage.pageSettings.title=l.inputPageSettingsTitle.value,l.activePage.pageSettings.meta_description=l.inputPageSettingsMetaDescription.value,l.activePage.pageSettings.meta_keywords=l.inputPageSettingsMetaKeywords.value,l.activePage.pageSettings.header_includes=l.inputPageSettingsIncludes.value,l.activePage.pageSettings.page_css=l.inputPageSettingsPageCss.value,l.setPendingChanges(!0),$(l.modalPageSettings).modal("hide")},updatePageStatus:function(e){for(var t in this.sitePages)this.sitePages[t].status=e},emptyPage:function(){l.activePage.clear()},isEmpty:function(){var e=0;if(1===this.sitePages.length&&0===this.activePage.blocks.length)for(e=0;e<this.actionButtons.length;e++)this.actionButtons[e].classList.add("disabled");else for(e=0;e<this.actionButtons.length;e++)this.actionButtons[e].classList.remove("disabled")}};s.init(),l.init(),t.exports.site=l,t.exports.builderUI=s}()},{"./config.js":4,"./ui.js":9,"./utils.js":10}],3:[function(e,t,n){!function(){"use strict";var n=e("./builder.js");t.exports.Element=function(e){this.element=e,this.sandbox=!1,this.parentFrame={},this.parentBlock={},this.setOpen=function(){$(this.element).off("mouseenter mouseleave click"),$(this.element).closest("body").width()!==$(this.element).width()?$(this.element).css({outline:"2px dotted #f72727",cursor:"pointer"}):$(this.element).css({outline:"2px dotted #f72727","outline-offset":"-3px",cursor:"pointer"})},this.activate=function(){var e=this;$(this.element).css({outline:"",cursor:""}),$(this.element).on("mouseenter",function(){$(this).closest("body").width()!==$(this).width()?$(this).css({outline:"2px dotted #f72727",cursor:"pointer"}):$(this).css({outline:"2px dotted #f72727","outline-offset":"-3px",cursor:"pointer"})}).on("mouseleave",function(){$(this).css({outline:"",cursor:"","outline-offset":""})}).on("click",function(t){t.preventDefault(),t.stopPropagation(),e.clickHandler(this)})},this.deactivate=function(){$(this.element).off("mouseenter mouseleave click"),$(this.element).css({outline:"",cursor:""})},this.removeOutline=function(){$(this.element).css({outline:"",cursor:""})},this.setParentFrame=function(){for(var e=this.element.ownerDocument,t=e.defaultView||e.parentWindow,n=t.parent.document.getElementsByTagName("iframe"),a=n.length;a-->0;){var i=n[a];try{var o=i.contentDocument||i.contentWindow.document;o===e&&(this.parentFrame=i)}catch(s){}}},this.setParentBlock=function(){for(var e=0;e<n.site.sitePages.length;e++)for(var t=0;t<n.site.sitePages[e].blocks.length;t++)n.site.sitePages[e].blocks[t].frame===this.parentFrame&&(this.parentBlock=n.site.sitePages[e].blocks[t])},this.setParentFrame(),this.parentFrame.getAttribute("data-sandbox")&&(this.sandbox=this.parentFrame.getAttribute("data-sandbox"))}}()},{"./builder.js":2}],4:[function(e,t,n){!function(){"use strict";t.exports.pageContainer="#page",t.exports.editableItems={"span.fa, i.fa":["color","font-size","background-color"],".bg-color":["background-color","color"],".mb":["margin-bottom"],".mt":["margin-top"],".margin":["margin"],".bg-color-advance":["background-color","padding-top","padding-bottom","padding-left","padding-right","border-color"],".bg-color-pd":["background-color","padding-top","padding-bottom","padding-left","padding-right","border-color"],".header-bg":["background-color","border-color"],"nav a":["color","background-color","border-color","font-size","font-weight","font-family","text-transform"],".editText h1, .editText h2, .editText h3, .editText h4, .editText h5, .editText p":["color","background-color","font-size","font-weight","font-family","text-transform"],"a.fs_btn, button.fs_btn, .fs_link":["color","background-color","border-color","font-size","font-weight","font-family","text-transform","border-radius"],".text-typo":["color","background-color","font-size","font-weight","font-family","text-transform","border-radius"],".bd-color":["border-color"],".icon-color":["color","font-size","background-color"],img:["border-top-left-radius","border-top-right-radius","border-bottom-left-radius","border-bottom-right-radius","border-color","border-style","border-width"],"hr.dashed":["border-color","border-width"],".divider > span":["color","font-size"],"hr.shadowDown":["margin-top","margin-bottom"],".edit-color":["color"],".pd":["padding"],".edit-bg-advance":["background-image","background-color"],".pd-top-bottom":["padding-top","padding-bottom"],".fox-b-builder-bg-image":["background-image","padding-top","padding-bottom"],".frameCover":[]},t.exports.editableItemOptions={"nav a : font-weight":["400","700"],"a.btn : border-radius":["0px","4px","10px"],"img : border-style":["none","dotted","dashed","solid"],"img : border-width":["1px","2px","3px","4px"],"h1, h2, h3, h4, h5, p: font-family":["default","Lato","Helvetica","Arial","Times New Roman"],"fox-b-text :font-family":["default","Lato","Helvetica","Arial","Times New Roman"],"h2 : font-family":["default","Lato","Helvetica","Arial","Times New Roman"],"h3 : font-family":["default","Lato","Helvetica","Arial","Times New Roman"],"p : font-family":["default","Lato","Helvetica","Arial","Times New Roman"]},t.exports.editableContent=[".editContent","button",".nav a",".footer a:not(.fa)",".tableWrapper"],t.exports.autoSaveTimeout=6e4,t.exports.sourceCodeEditSyntaxDelay=1e4}()},{}],5:[function(e,t,n){!function(){"use strict";var t=e("./canvasElement.js").Element,n=e("./config"),a=e("./builder.js"),i={labelContentMode:document.getElementById("modeContentLabel"),radioContent:document.getElementById("modeContent"),buttonUpdateContent:document.getElementById("updateContentInFrameSubmit"),activeElement:{},allContentItemsOnCanvas:[],modalEditContent:document.getElementById("editContentModal"),init:function(){$(this.labelContentMode).show(),$(this.radioContent).on("click",this.activateContentMode),$(this.buttonUpdateContent).on("click",this.updateElementContent),$(this.modalEditContent).on("hidden.bs.modal",this.editContentModalCloseEvent),$(document).on("modeDetails modeBlocks","body",this.deActivateMode),$("body").on("beforeSave",function(){Object.keys(i.activeElement).length>0&&i.activeElement.removeOutline()})},activateContentMode:function(){t.prototype.clickHandler=function(e){i.contentClick(e)},$("body").trigger("modeContent");for(var e=0;e<a.site.sitePages.length;e++)a.site.sitePages[e].toggleFrameCovers("Off");$("#pageList ul li iframe").each(function(){for(var e in n.editableContent)$(this).contents().find(n.pageContainer+" "+n.editableContent[e]).each(function(){var e=new t(this);e.activate(),i.allContentItemsOnCanvas.push(e)})})},contentClick:function(e){0!==Object.keys(this.activeElement).length&&this.activeElement.activate();var n=new t(e);n.setParentBlock(),i.activeElement=n,i.activeElement.setOpen(),$("#editContentModal").modal("show"),"SMALL"===e.tagName||"A"===e.tagName||"LI"===e.tagName||"SPAN"===e.tagName||"B"===e.tagName||"I"===e.tagName||"TT"===e.tagName||"CODE"===e.tageName||"EM"===e.tagName||"STRONG"===e.tagName||"SUB"===e.tagName||"BUTTON"===e.tagName||"LABEL"===e.tagName||"P"===e.tagName||"H1"===e.tagName||"H2"===e.tagName||"H2"===e.tagName||"H3"===e.tagName||"H4"===e.tagName||"H5"===e.tagName||"H6"===e.tagName?$("#contentToEdit").summernote({toolbar:[["codeview",["codeview"]],["fontstyle",["bold","italic","underline","strikethrough","clear"]],["help",["undo","redo"]]]}):"DIV"===e.tagName&&$(e).hasClass("tableWrapper")?$("#contentToEdit").summernote({toolbar:[["codeview",["codeview"]],["fontstyle",["bold","italic","underline","strikethrough","clear"]],["help",["undo","redo"]]]}):$("#contentToEdit").summernote({toolbar:[["codeview",["codeview"]],["fontstyle",["bold","italic","underline","strikethrough","clear"]],["help",["undo","redo"]]]}),$("#contentToEdit").summernote("code",$(e).html())},updateElementContent:function(){if($(i.activeElement.element).html($("#editContentModal #contentToEdit").summernote("code").replace(/<br\/?>/gi,"\n")).css({outline:"",cursor:""}),i.activeElement.sandbox){var e=$(i.activeElement.element).attr("id");$("#"+i.activeElement.sandbox).contents().find("#"+e).html($("#editContentModal #contentToEdit").summernote("code").replace(/<br\/?>/gi,"\n"))}$("#editContentModal #contentToEdit").summernote("code",""),$("#editContentModal #contentToEdit").summernote("destroy"),$("#editContentModal").modal("hide"),$(this).closest("body").removeClass("modal-open").attr("style",""),i.activeElement.parentBlock.heightAdjustment(),a.site.setPendingChanges(!0),i.activeElement.activate();var t=$(i.activeElement.element).parents(".equalize").length;if(t>0){var n=$(i.activeElement.parentFrame).attr("id");document.getElementById(n).contentWindow.LoadEqualize()}},editContentModalCloseEvent:function(){$("#editContentModal #contentToEdit").summernote("destroy"),i.activeElement.activate()},deActivateMode:function(){Object.keys(i.activeElement).length>0&&i.activeElement.removeOutline();for(var e=0;e<i.allContentItemsOnCanvas.length;e++)i.allContentItemsOnCanvas[e].deactivate()}};i.init()}()},{"./builder.js":2,"./canvasElement.js":3,"./config":4}],6:[function(e,t,n){!function(){"use strict";var t=e("./config.js"),n=e("../vendor/publisher"),a={modalExport:document.getElementById("exportModal"),buttonExport:document.getElementById("exportPage"),init:function(){$(this.modalExport).on("show.bs.modal",this.doExportModal),$(this.modalExport).on("shown.bs.modal",this.prepExport),$(this.modalExport).find("form").on("submit",this.exportFormSubmit),$(this.buttonExport).show()},doExportModal:function(){var e=$(location).attr("hostname");"www.themezaa.com"==e?($("#exportModal > form #buy-full-version").show(""),$("#exportModal > form #exportSubmit").hide("")):($("#exportModal > form #exportSubmit").show(""),$("#exportModal > form #buy-full-version").hide("")),$("#exportModal > form #exportCancel").text("Cancel & Close")},prepExport:function(e){n.publish("closeStyleEditor"),$('#exportModal form input[type="hidden"].pages').remove(),$("#pageList > ul").each(function(){var e,n=$("iframe#skeleton").contents().find(t.pageContainer);n.find("*").remove(),$(this).find("iframe").each(function(){var a=$(this).attr("data-sandbox");$(this).attr("id");e="undefined"!=typeof a&&a!==!1?$("#sandboxes #"+a).contents().find(t.pageContainer):$(this).contents().find(t.pageContainer).clone(),e.find(".frameCover").each(function(){$(this).remove()}),e.find(".equalize").children().length>0&&e.find(".equalize").children().css("height","");for(var i in t.editableItems)e.find(i).each(function(){$(this).removeAttr("data-selector"),$(this).css("outline",""),$(this).css("outline-offset",""),$(this).css("cursor",""),""===$(this).attr("style")&&$(this).removeAttr("style")});for(var o=0;o<t.editableContent.length;++o)e.find(t.editableContent[o]).each(function(){$(this).removeAttr("data-selector")});var s=e.html(),l=$(this).contents().find(t.pageContainer).find("script");if(l.size()>0){var r,c=document.getElementById("skeleton");l.each(function(){""!==$(this).text()?(r=c.contentWindow.document.createElement("script"),r.type="text/javascript",r.innerHTML=$(this).text(),c.contentWindow.document.getElementById(t.pageContainer.substring(1)).appendChild(r)):null!==$(this).attr("src")&&(r=c.contentWindow.document.createElement("script"),r.type="text/javascript",r.src=$(this).attr("src"),c.contentWindow.document.getElementById(t.pageContainer.substring(1)).appendChild(r))})}n.append($(s))});var a=$('<input type="hidden" name="pages['+$("#pages li:eq("+($(this).index()+1)+") a:first").text()+']" class="pages" value="">'),i=$("#pageTitle").text(),o=$.jStorage.get("fox_b_seo_"+i);$("#fox_b_seo_"+i).remove();var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name","fox_b_seo["+i+"]"),s.setAttribute("id","fox_b_seo_"+i),o?s.setAttribute("value",o[0]+"1_@_2_@"+o[1]+"1_@_2_@"+o[2]+"1_@_2_@"+o[3]):s.setAttribute("value",""),$("#exportModal form").prepend(s),$("#exportModal form").prepend(a),a.val($("iframe#skeleton").contents().find("body").html())})},exportFormSubmit:function(){$("#exportModal > form #exportSubmit").hide(""),$("#exportModal > form #exportCancel").text("Close Window")}};a.init()}()},{"../vendor/publisher":11,"./config.js":4}],7:[function(e,t,n){!function(){"use strict";var t=(e("./config.js"),e("./builder.js")),n={modalPreview:document.getElementById("previewModal"),buttonPreview:document.getElementById("buttonPreview"),init:function(){$(this.modalPreview).on("shown.bs.modal",this.prepPreview),$(this.modalPreview).on("show.bs.modal",this.prepPreviewLink),$(this.buttonPreview).show()},prepPreview:function(){$('#previewModal form input[type="hidden"]').remove(),t.site.activePage.fullPage();var e;e=$('<input type="hidden" name="page" value="">'),$("#previewModal form").prepend(e),e.val("<html>"+$("iframe#skeleton").contents().find("html").html()+"</html>"),e=$('<input type="hidden" name="meta_title" value="">'),$("#previewModal form").prepend(e),e.val(t.site.activePage.pageSettings.title),e=$('<input type="hidden" name="meta_description" value="">'),$("#previewModal form").prepend(e),e.val(t.site.activePage.pageSettings.meta_description),e=$('<input type="hidden" name="meta_keywords" value="">'),$("#previewModal form").prepend(e),e.val(t.site.activePage.pageSettings.meta_keywords),e=$('<input type="hidden" name="header_includes" value="">'),$("#previewModal form").prepend(e),e.val(t.site.activePage.pageSettings.header_includes),e=$('<input type="hidden" name="page_css" value="">'),$("#previewModal form").prepend(e),e.val(t.site.activePage.pageSettings.page_css),e=$('<input type="hidden" name="siteID" value="">'),$("#previewModal form").prepend(e),e.val(t.site.data.sites_id)},prepPreviewLink:function(){$("#pagePreviewLink").attr("href",$("#pagePreviewLink").attr("data-defurl")+$("#pages li.active a").text())}};n.init()}()},{"./builder.js":2,"./config.js":4}],8:[function(e,t,n){!function(){"use strict";var t=e("./canvasElement.js").Element,a=e("./config.js"),i=e("./builder.js"),o=e("../vendor/publisher"),s={radioStyle:document.getElementById("modeStyle"),labelStyleMode:document.getElementById("modeStyleLabel"),buttonSaveChanges:document.getElementById("saveStyling"),activeElement:{},allStyleItemsOnCanvas:[],_oldIcon:[],_oldBGLG:[],_oldStyle:[],styleEditor:document.getElementById("styleEditor"),formStyle:document.getElementById("stylingForm"),buttonRemoveElement:document.getElementById("deleteElementConfirm"),buttonCloneElement:document.getElementById("cloneElementButton"),buttonResetElement:document.getElementById("resetStyleButton"),selectLinksInernal:document.getElementById("internalLinksDropdown"),selectLinksPages:document.getElementById("pageLinksDropdown"),videoInputYoutube:document.getElementById("youtubeID"),videoInputVimeo:document.getElementById("vimeoID"),inputCustomLink:document.getElementById("internalLinksCustom"),selectIcons:document.getElementById("icons"),buttonDetailsAppliedHide:document.getElementById("detailsAppliedMessageHide"),buttonCloseStyleEditor:document.querySelector("#styleEditor > a.close"),ulPageList:document.getElementById("pageList"),init:function(){o.subscribe("closeStyleEditor",function(){s.closeStyleEditor()}),$(this.radioStyle).on("click",this.activateStyleMode),$(this.buttonSaveChanges).on("click",this.updateStyling),$(this.formStyle).on("focus","input",this.animateStyleInputIn).on("blur","input",this.animateStyleInputOut),$(this.buttonRemoveElement).on("click",this.deleteElement),$(this.buttonCloneElement).on("click",this.cloneElement),$(this.buttonResetElement).on("click",this.resetElement),$(this.selectLinksInernal).on("change",this.resetSelectLinksInternal),$(this.selectLinksPages).on("change",this.resetSelectLinksPages),$(this.videoInputYoutube).on("focus",function(){$(s.videoInputVimeo).val("")}),$(this.videoInputVimeo).on("focus",function(){$(s.videoInputYoutube).val("")}),$(this.inputCustomLink).on("focus",this.resetSelectAllLinks),$(this.buttonDetailsAppliedHide).on("click",function(){$(this).parent().fadeOut(500)}),$(this.buttonCloseStyleEditor).on("click",this.closeStyleEditor),$(document).on("modeContent modeBlocks","body",this.deActivateMode);$(this.selectIcons).chosen({search_contains:!0});$("#icons").on("change",function(e,t){var n=$(this).val(),a=n.substring(0,3);"ti-"==a?($(".chosen-container-single .chosen-single span").removeClass("font-awesome"),$(".chosen-container-single .chosen-single span").addClass("themify")):($(".chosen-container-single .chosen-single span").removeClass("themify"),$(".chosen-container-single .chosen-single span").addClass("font-awesome"))}),window.FormData||this.hideFileUploads(),$(this.labelStyleMode).show(),$("body").on("beforeSave",this.closeStyleEditor)},activateStyleMode:function(){var e;for(t.prototype.clickHandler=function(e){s.styleClick(e)},e=1;e<=$("ul#page1 li").length;e++){var n="#ui-id-"+e;$(n).contents().find(".overlay").remove()}for($("body").trigger("modeDetails"),e=0;e<i.site.sitePages.length;e++)i.site.sitePages[e].toggleFrameCovers("Off");for(e=0;e<i.site.sitePages.length;e++)for(var o=0;o<i.site.sitePages[e].blocks.length;o++)for(var l in a.editableItems)$(i.site.sitePages[e].blocks[o].frame).contents().find(a.pageContainer+" "+l).each(function(){var e=new t(this);e.activate(),s.allStyleItemsOnCanvas.push(e),$(this).attr("data-selector",l)})},styleClick:function(e){0!==Object.keys(this.activeElement).length&&this.activeElement.activate();var n=new t(e);n.setParentBlock(),this.activeElement=n,this.activeElement.setOpen();var a=$(this.activeElement.element).attr("data-selector");if($("#editingElement").text(a),$("#detailTabs a:first").click(),$("ul#detailTabs li:gt(0)").hide(),("A"===$(this.activeElement.element).prop("tagName")||"A"===$(this.activeElement.element).parent().prop("tagName"))&&this.editLink(this.activeElement.element),"IMG"===$(this.activeElement.element).prop("tagName")||".fox-b-builder-bg-image"===$(this.activeElement.element).attr("data-selector")){this.editImage(this.activeElement.element),$("#recommended-size").text("");var i=$(e).attr("data-img-size");$("#recommended-size").text(i)}"video"===$(this.activeElement.element).attr("data-type")&&this.editVideo(this.activeElement.element),$(this.activeElement.element).hasClass("fa")&&this.editIcon(this.activeElement.element),this.buildeStyleElements(a),this.toggleSidePanel("open")},buildeStyleElements:function(e){$("#styleElements > *:not(#styleElTemplate)").each(function(){$(this).remove()});for(var t=0;t<a.editableItems[e].length;t++){var n=$("#styleElTemplate").clone();if(n.attr("id",""),n.find(".control-label").text(a.editableItems[e][t]+":"),e+" : "+a.editableItems[e][t]in a.editableItemOptions){n.find("input").remove();var o=$('<select class="form-control select select-primary btn-block select-sm"></select>');o.attr("name",a.editableItems[e][t]);for(var l=0;l<a.editableItemOptions[e+" : "+a.editableItems[e][t]].length;l++){var r=$('<option value="'+a.editableItemOptions[e+" : "+a.editableItems[e][t]][l]+'">'+a.editableItemOptions[e+" : "+a.editableItems[e][t]][l]+"</option>");(a.editableItemOptions[e+" : "+a.editableItems[e][t]][l]===$(s.activeElement.element).css("border-top-style")||a.editableItemOptions[e+" : "+a.editableItems[e][t]][l]===$(s.activeElement.element).css(a.editableItems[e][t])||a.editableItemOptions[e+" : "+a.editableItems[e][t]][l]===$(s.activeElement.element).css("border-left-width"))&&r.prop("selected",!0),o.append(r)}n.append(o),o.select2()}else n.find("input").val($(s.activeElement.element).css(a.editableItems[e][t])).attr("name",a.editableItems[e][t]),"background-image"===a.editableItems[e][t]?n.find("input").bind("focus",function(){var e=$(this);$("#imageModal").modal("show"),$("#imageModal .image button.useImage").unbind("click"),$("#imageModal").on("click",".image button.useImage",function(){$(s.activeElement.element).css("background-image",'url("'+$(this).attr("data-url")+'")'),e.val('url("'+$(this).attr("data-url")+'")'),$("#imageModal").modal("hide"),i.site.setPendingChanges(!0)})}):a.editableItems[e][t].indexOf("color")>-1&&("transparent"!==$(s.activeElement.element).css(a.editableItems[e][t])&&"none"!==$(s.activeElement.element).css(a.editableItems[e][t])&&""!==$(s.activeElement.element).css(a.editableItems[e][t])&&n.val($(s.activeElement.element).css(a.editableItems[e][t])),n.find("input").spectrum({preferredFormat:"hex",showPalette:!0,allowEmpty:!0,showInput:!0,palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]]}));n.css("display","block"),$("#styleElements").append(n),$("#styleEditor form#stylingForm").height("auto")}},updateStyling:function(){var e,t="",n=[];if($("#styleEditor #tab1 .form-group:not(#styleElTemplate) input, #styleEditor #tab1 .form-group:not(#styleElTemplate) select").each(function(){if(void 0!==$(this).attr("name")){var e=$(this).attr("name"),a=$(this).val(),i="";void 0!==s._oldStyle[$(s.activeElement.element).attr("id")]&&(i=s._oldStyle[$(s.activeElement.element).attr("id")][e]);var o=$(s.activeElement.element).css(e);i&&(o=i);var l=a;t=o!==l?t+e+":"+a+" !important;":t+e+":"+a+";",n[e]=o}}),""!==t&&($(s.activeElement.element).uniqueId(),void 0===s._oldStyle[$(s.activeElement.element).attr("id")]&&(s._oldStyle[$(s.activeElement.element).attr("id")]=n),$(s.activeElement.element).attr("style",t),$(s.activeElement.element).css({outline:"2px dotted #f72727",cursor:"pointer"}),s.activeElement.sandbox&&(e=$(s.activeElement.element).attr("id"),$("#"+s.activeElement.sandbox).contents().find("#"+e).attr("style",t))),"A"===$(s.activeElement.element).prop("tagName")&&("#"!==$("select#internalLinksDropdown").val()?$(s.activeElement.element).attr("href",$("select#internalLinksDropdown").val()):"#"!==$("select#pageLinksDropdown").val()?$(s.activeElement.element).attr("href",$("select#pageLinksDropdown").val()):""!==$("input#internalLinksCustom").val()&&$(s.activeElement.element).attr("href",$("input#internalLinksCustom").val()),s.activeElement.sandbox&&(e=$(s.activeElement.element).attr("id"),"#"!==$("select#internalLinksDropdown").val()?$("#"+s.activeElement.sandbox).contents().find("#"+e).attr("href",$("select#internalLinksDropdown").val()):"#"!==$("select#pageLinksDropdown").val()?$("#"+s.activeElement.sandbox).contents().find("#"+e).attr("href",$("select#pageLinksDropdown").val()):""!==$("input#internalLinksCustom").val()&&$("#"+s.activeElement.sandbox).contents().find("#"+e).attr("href",$("input#internalLinksCustom").val()))),"A"===$(s.activeElement.element).parent().prop("tagName")){if("#"!==$("select#internalLinksDropdown").val())$(s.activeElement.element).parent().attr("href",$("select#internalLinksDropdown").val());else if("#"!==$("select#pageLinksDropdown").val())$(s.activeElement.element).parent().attr("href",$("select#pageLinksDropdown").val());else if(""!==$("input#internalLinksCustom").val()){var a=$(s.activeElement.element).parents().find("section").attr("id");if(void 0!=a){var o=a.substring(0,10),l=$("input#internalLinksCustom").val();if("portfolios"==o){var r=l.substr(l.lastIndexOf(".")+1);"jpeg"===r||"jpg"===r||"png"===r||"gif"===r||""===l||"#"===l?$(s.activeElement.element).closest("a").attr("href",l):($(s.activeElement.element).parent().parent().removeClass("lightbox-gallery"),$(s.activeElement.element).parent().attr("href",l),$(s.activeElement.element).parent().attr("target","_blank"))}else $(s.activeElement.element).parent().attr("href",l)}}if(s.activeElement.sandbox)if(e=$(s.activeElement.element).attr("id"),"#"!==$("select#internalLinksDropdown").val())$("#"+s.activeElement.sandbox).contents().find("#"+e).parent().attr("href",$("select#internalLinksDropdown").val());else if("#"!==$("select#pageLinksDropdown").val())$("#"+s.activeElement.sandbox).contents().find("#"+e).parent().attr("href",$("select#pageLinksDropdown").val());else if(""!==$("input#internalLinksCustom").val())if("portfolios"==o)if("#link_Tab"==$("#detailTabs li.active").find("a").attr("href")){var l=$("input#internalLinksCustom").val(),r=l.substr(l.lastIndexOf(".")+1);"jpeg"===r||"jpg"===r||"png"===r||"gif"===r||""===l||"#"===l?$("#"+s.activeElement.sandbox).contents().find("#"+e).closest("a").attr("href",l):($("#"+s.activeElement.sandbox).contents().find("#"+e).parent().parent().removeClass("lightbox-gallery"),$("#"+s.activeElement.sandbox).contents().find("#"+e).parent().attr("href",l),$("#"+s.activeElement.sandbox).contents().find("#"+e).parent().attr("target","_blank"))}else $("#"+s.activeElement.sandbox).contents().find("#"+e).closest("a").attr("href",$("input#imageURL").val());else $("#"+s.activeElement.sandbox).contents().find("#"+e).parent().attr("href",$("input#internalLinksCustom").val())}if("block"===$("a#img_Link").css("display")&&""!==$("input#imageFileField").val()){var c=$("form#imageUploadForm"),d=!1;window.FormData&&(d=new FormData(c[0]));var m=c.attr("action");$.ajax({url:m,data:d?d:c.serialize(),cache:!1,contentType:!1,processData:!1,dataType:"json",type:"POST"}).done(function(e){if(1===e.code){if($("input#imageURL").val(e.response),".fox-b-builder-bg-image"!==$(s.activeElement.element).attr("data-selector")||s.activeElement.sandbox)s.activeElement.sandbox||"IMG"!==$(s.activeElement.element).prop("tagName")||$(s.activeElement.element).attr("src",e.response);else{var t=$(s.activeElement.element).css("background-image"),n=t.toString().split("url");if(""!=n[0])var a=n[1].toString().replace(/"/g,"").replace("(","").replace(")","").split("elements/"),i=n[0]+'url("'+a[1]+'")',l=n[0]+'url("'+e.response+'")';else var a=n[0].toString().replace(/"/g,"").replace("(","").replace(")","").split("elements/"),i="url('"+a[1]+"')",l='url("'+e.response+'")';$(s.activeElement.element).css("background-image",""),$(s.activeElement.element).css("background-image",'url("'+e.response+'")').promise().done(function(){setTimeout(function(){$(s.activeElement.element).css("background-image",l)},100)}),$("#styleElements").find("input[name='background-image']").val(l),""!=t&&($(s.activeElement.element).uniqueId(),s._oldBGLG[$(s.activeElement.element).attr("id")]=i)}if($(".imageFileTab").find("a.fileinput-exists").click(),".fox-b-builder-bg-image"===$(s.activeElement.element).attr("data-selector")&&s.activeElement.sandbox){var t=$(s.activeElement.element).css("background-image"),n=t.toString().split("url");if(""!=n[0])var a=n[1].toString().replace(/"/g,"").replace("(","").replace(")","").split("elements/"),i=n[0]+"url('"+a[1]+"')",l=n[0]+"url('"+e.response+"')";else var a=n[0].toString().replace(/"/g,"").replace("(","").replace(")","").split("elements/"),i="url('"+a[1]+"')",l="url('"+e.response+"')";var r=$(s.activeElement.element).attr("id");$("#"+s.activeElement.sandbox).contents().find("#"+r).attr("style","background-image:"+l),$(s.activeElement.element).css("background-image",""),$(s.activeElement.element).css("background-image",'url("'+e.response+'")').promise().done(function(){setTimeout(function(){$(s.activeElement.element).css("background-image",l)},100)}),$("#styleElements").find("input[name='background-image']").val(l),""!=t&&(s._oldBGLG[r]=i)}else if("portfolios"==o&&s.activeElement.sandbox){$(s.activeElement.element).attr("src",e.response),$(s.activeElement.element).closest("a").attr("href",e.response),$("input#internalLinksCustom").val(e.response);var r=$(s.activeElement.element).attr("id");$("#"+s.activeElement.sandbox).contents().find("#"+r).attr("src",e.response),$("#"+s.activeElement.sandbox).contents().find("#"+r).closest("a").attr("href",e.response)}else if(s.activeElement.sandbox&&"portfolios"!=o&&"IMG"===$(s.activeElement.element).prop("tagName")){$(s.activeElement.element).attr("src",e.response);var r=$(s.activeElement.element).attr("id");$("#"+s.activeElement.sandbox).contents().find("#"+r).attr("src",e.response)}}else 0===e.code&&alert("Something went wrong: "+e.response)})}else if("block"===$("a#img_Link").css("display"))if(""!==$("input#imageURL").val()&&$("input#imageURL").val()!==$(s.activeElement.element).attr("src")){if(".fox-b-builder-bg-image"!==$(s.activeElement.element).attr("data-selector")||s.activeElement.sandbox||""===$("input#imageURL").val()||$("input#imageURL").val()===$(s.activeElement.element).attr("src"))"IMG"===$(s.activeElement.element).prop("tagName")&&$(s.activeElement.element).attr("src",$("input#imageURL").val());else{var u=$("#imageBgOld").val(),p=u.toString().split("url"),g=$(s.activeElement.element).css("background-image"),f=g.toString().split("url");if(""!=f[0]){if(p[1].match(/elements/g))var v=p[1].toString().replace(/"/g,"").replace("(","").replace(")","").split("elements/"),h=v[1].substr(v[1].lastIndexOf("/")+1);else var v=p[1].toString().replace(/"/g,"").replace("(","").replace(")",""),h=v.substr(v.lastIndexOf("/")+1);if(f[1].match(/elements/g))var b=f[1].toString().replace(/"/g,"").replace("(","").replace(")","").split("elements/"),E=b[1].substr(b[1].lastIndexOf("/")+1);else var b=f[1].toString().replace(/"/g,"").replace("(","").replace(")",""),E=b.substr(b.lastIndexOf("/")+1);if(p[0]!=f[0]&&h!=E){var y=p[0]+'url("'+$("input#imageURL").val()+'")',k=f[0]+'url("'+b[1]+'")',x=f[0]+'url("'+b[1]+'")';$("input#imageURL").val(b[1])}else if(p[0]!=f[0]&&h==E){var y=p[0]+'url("'+$("input#imageURL").val()+'")',k=f[0]+'url("'+v[1]+'")',x=f[0]+'url("'+v[1]+'")';$("input#imageURL").val(v[1])}else if(p[0]==f[0]&&h!=E){var y=p[0]+'url("'+$("input#imageURL").val()+'")',k=p[0]+'url("'+b[1]+'")',x=p[0]+'url("'+$("input#imageURL").val()+'")';$("input#imageURL").val(b[1])}else if(p[0]==f[0]&&h!=$("input#imageURL").val()){var y=p[0]+'url("'+v[1]+'")',k=p[0]+'url("'+$("input#imageURL").val()+'")',x=p[0]+'url("'+v[1]+'")';$("input#imageURL").val($("input#imageURL").val()),$("#styleElements").find("input[name='background-image']").val(k);
}}else{if(p[1].match(/elements/g))var v=p[1].toString().replace(/"/g,"").replace("(","").replace(")","").split("elements/");else var v=p[1].toString().replace(/"/g,"").replace("(","").replace(")","");var y="url('"+$("input#imageURL").val()+"')",k="url('"+v[1]+"')",x="url('"+v[1]+"')"}$("#imageBgOld").val(x),""!=u&&($(s.activeElement.element).uniqueId(),s._oldBGLG[$(s.activeElement.element).attr("id")]=y)}if(s.activeElement.sandbox&&".fox-b-builder-bg-image"===$(s.activeElement.element).attr("data-selector")){var u=$("#imageBgOld").val(),p=u.toString().split("url"),g=$(s.activeElement.element).css("background-image"),f=g.toString().split("url");if(""!=f[0]){if(p[1].match(/elements/g))var v=p[1].toString().replace(/"/g,"").replace("(","").replace(")","").split("elements/"),h=v[1].substr(v[1].lastIndexOf("/")+1);else var v=p[1].toString().replace(/"/g,"").replace(")","").split("("),h=v[1].substr(v[1].lastIndexOf("/")+1);if(f[1].match(/elements/g))var b=f[1].toString().replace(/"/g,"").replace("(","").replace(")","").split("elements/"),E=b[1].substr(b[1].lastIndexOf("/")+1);else var b=b[1]=f[1].toString().replace(/"/g,"").replace(")","").split("("),E=b[1].substr(b[1].lastIndexOf("/")+1);if(p[0]!=f[0]&&h!=E){var y=p[0]+'url("'+$("input#imageURL").val()+'")',k=f[0]+'url("'+b[1]+'")',x=f[0]+'url("'+b[1]+'")';$("input#imageURL").val(b[1])}else if(p[0]!=f[0]&&h==E){var y=p[0]+'url("'+$("input#imageURL").val()+'")',k=f[0]+'url("'+v[1]+'")',x=f[0]+'url("'+v[1]+'")';$("input#imageURL").val(v[1])}else if(p[0]==f[0]&&h!=E){var y=p[0]+'url("'+$("input#imageURL").val()+'")',k=p[0]+'url("'+b[1]+'")',x=p[0]+'url("'+$("input#imageURL").val()+'")';$("input#imageURL").val(b[1])}else if(p[0]==f[0]&&h!=$("input#imageURL").val()){var y=p[0]+'url("'+v[1]+'")',k=p[0]+'url("'+$("input#imageURL").val()+'")',x=p[0]+'url("'+v[1]+'")';$("input#imageURL").val($("input#imageURL").val()),$("#styleElements").find("input[name='background-image']").val(k)}}else{if(p[1].match(/elements/g))var v=p[1].toString().replace(/"/g,"").replace("(","").replace(")","").split("elements/");else var v=p[1].toString().replace(/"/g,"").replace("(","").replace(")","");var y="url('"+$("input#imageURL").val()+"')",k="url('"+v[1]+"')",x="url('"+v[1]+"')"}$("#imageBgOld").val(x);var e=$(s.activeElement.element).attr("id");$("#"+s.activeElement.sandbox).contents().find("#"+e).attr("style","background-image:"+k),$(s.activeElement.element).css("background-image",""),$(s.activeElement.element).css("background-image",'url("'+b[1]+'")').promise().done(function(){setTimeout(function(){$(s.activeElement.element).css("background-image",k)},100)}),""!=u&&(s._oldBGLG[e]=y)}else if(s.activeElement.sandbox&&"IMG"===$(s.activeElement.element).prop("tagName")){var a=$(s.activeElement.element).parents().find("section").attr("id");if(void 0!=a)var o=a.substring(0,10);if("portfolios"==o){var l=$("input#imageURL").val();$(s.activeElement.element).attr("src",l);var e=$(s.activeElement.element).attr("id");$("#"+s.activeElement.sandbox).contents().find("#"+e).attr("src",l),$("input#internalLinksCustom").val(l)}else $(s.activeElement.element).attr("src",$("input#imageURL").val()),e=$(s.activeElement.element).attr("id"),$("#"+s.activeElement.sandbox).contents().find("#"+e).attr("src",$("input#imageURL").val())}}else{var a=$(s.activeElement.element).parents().find("section").attr("id");if(void 0!=a){var o=a.substring(0,10);if("portfolios"==o){var l=$("input#internalLinksCustom").val(),r=l.substr(l.lastIndexOf(".")+1);if("jpeg"===r||"jpg"===r||"png"===r||"gif"===r||""==l){var e=$(s.activeElement.element).attr("id");$(s.activeElement.element).attr("src",l),$("#"+s.activeElement.sandbox).contents().find("#"+e).attr("src",l),$("input#imageURL").val(l)}}}}if($(s.activeElement.element).hasClass("fa")){var _=$.grep(s.activeElement.element.className.split(" "),function(e,t){return 0===e.indexOf("fa-")}).join(),I=$.grep(s.activeElement.element.className.split(" "),function(e,t){return 0===e.indexOf("ti-")}).join(),L=$.grep(s.activeElement.element.className.split(" "),function(e,t){return 0===e.indexOf("icon-")}).join();_!=$("select#icons").val()&&""!=_&&($(s.activeElement.element).uniqueId(),s._oldIcon[$(s.activeElement.element).attr("id")]=_),I!=$("select#icons").val()&&""!=I&&($(s.activeElement.element).uniqueId(),s._oldIcon[$(s.activeElement.element).attr("id")]=I),L!=$("select#icons").val()&&""!=L&&($(s.activeElement.element).uniqueId(),s._oldIcon[$(s.activeElement.element).attr("id")]=L),$(s.activeElement.element).removeClass(_).addClass($("select#icons").val()),$(s.activeElement.element).removeClass(I).addClass($("select#icons").val()),$(s.activeElement.element).removeClass(L).addClass($("select#icons").val()),s.activeElement.sandbox&&($("#"+s.activeElement.sandbox).contents().find("#"+e).removeClass(_).addClass($("select#icons").val()),$("#"+s.activeElement.sandbox).contents().find("#"+e).removeClass(I).addClass($("select#icons").val()),$("#"+s.activeElement.sandbox).contents().find("#"+e).removeClass(L).addClass($("select#icons").val()))}"video"===$(s.activeElement.element).attr("data-type")&&(""!==$("input#youtubeID").val()?$(s.activeElement.element).prev().attr("src","//www.youtube.com/embed/"+$("#video_Tab input#youtubeID").val()):""!==$("input#vimeoID").val()&&$(s.activeElement.element).prev().attr("src","//player.vimeo.com/video/"+$("#video_Tab input#vimeoID").val()+"?title=0&amp;byline=0&amp;portrait=0"),s.activeElement.sandbox&&(e=$(s.activeElement.element).attr("id"),""!==$("input#youtubeID").val()?$("#"+s.activeElement.sandbox).contents().find("#"+e).prev().attr("src","//www.youtube.com/embed/"+$("#video_Tab input#youtubeID").val()):""!==$("input#vimeoID").val()&&$("#"+s.activeElement.sandbox).contents().find("#"+e).prev().attr("src","//player.vimeo.com/video/"+$("#video_Tab input#vimeoID").val()+"?title=0&amp;byline=0&amp;portrait=0"))),$("#detailsAppliedMessage").fadeIn(600,function(){setTimeout(function(){$("#detailsAppliedMessage").fadeOut(1e3)},3e3)}),s.activeElement.parentBlock.heightAdjustment(),i.site.setPendingChanges(!0);var C=$(s.activeElement.element).parents(".equalize").length,w=$(s.activeElement.parentFrame).attr("id");C>0&&document.getElementById(w).contentWindow.LoadEqualize()},animateStyleInputIn:function(){$(this).css("position","absolute"),$(this).css("right","0px"),$(this).animate({width:"100%"},500),$(this).focus(function(){this.select()})},animateStyleInputOut:function(){$(this).animate({width:"42%"},500,function(){$(this).css("position","relative"),$(this).css("right","auto")})},editLink:function(e){$("a#link_Link").parent().show();var t;"A"===$(e).prop("tagName")?t=$(e).attr("href"):"A"===$(e).parent().prop("tagName")&&(t=$(e).parent().attr("href"));var n=0,i=!1;$("select#internalLinksDropdown").prop("selectedIndex",0),$("select#internalLinksDropdown option").each(function(){$(this).attr("value")===t&&($(this).attr("selected",!0),n=$(this).index(),i=!0)}),$(".link_Tab .btn-group.select .dropdown-menu li").removeClass("selected"),$(".link_Tab .btn-group.select .dropdown-menu li:eq("+n+")").addClass("selected"),$(".link_Tab .btn-group.select:eq(0) .filter-option").text($("select#internalLinksDropdown option:selected").text()),$(".link_Tab .btn-group.select:eq(1) .filter-option").text($("select#pageLinksDropdown option:selected").text()),i===!0?$("input#internalLinksCustom").val(""):"A"===$(e).prop("tagName")?"#"!==$(e).attr("href")[0]?$("input#internalLinksCustom").val($(e).attr("href")):$("input#internalLinksCustom").val(""):"A"===$(e).parent().prop("tagName")&&("#"!==$(e).parent().attr("href")[0]?$("input#internalLinksCustom").val($(e).parent().attr("href")):$("input#internalLinksCustom").val("")),$("select#pageLinksDropdown option:not(:first)").remove(),$("#pageList ul:visible iframe").each(function(){if(void 0!==$(this).contents().find(a.pageContainer+" > *:first").attr("id")){var t;t=$(e).attr("href")==="#"+$(this).contents().find(a.pageContainer+" > *:first").attr("id")?"<option selected value=#"+$(this).contents().find(a.pageContainer+" > *:first").attr("id")+">#"+$(this).contents().find(a.pageContainer+" > *:first").attr("id")+"</option>":"<option value=#"+$(this).contents().find(a.pageContainer+" > *:first").attr("id")+">#"+$(this).contents().find(a.pageContainer+" > *:first").attr("id")+"</option>",$("select#pageLinksDropdown").append(t)}}),1===$("select#pageLinksDropdown option").size()?($("select#pageLinksDropdown").next().hide(),$("select#pageLinksDropdown").next().next().hide()):($("select#pageLinksDropdown").next().show(),$("select#pageLinksDropdown").next().next().show())},editImage:function(e){if($("a#img_Link").parent().show(),".fox-b-builder-bg-image"===$(e).attr("data-selector")){var t=$(e).css("background-image");if($("#imageBgOld").val(t),"none"!=t||""!=t){var n=t.split("url");if("none"!=n||""!=n){var t=n[1].toString().replace(/"/g,"").replace("(","").replace(")","").split("elements/");$(".imageFileTab").find("input#imageURL").val(t[1])}}}else $(".imageFileTab").find("input#imageURL").val($(e).attr("src"));$(".imageFileTab").find("a.fileinput-exists").click()},editVideo:function(e){var t;if($("a#video_Link").parent().show(),$("a#video_Link").click(),$(e).prev().attr("src").indexOf("vimeo.com")>-1)t=$(e).prev().attr("src").match(/player\.vimeo\.com\/video\/([0-9]*)/),$("#video_Tab input#vimeoID").val(t[t.length-1]),$("#video_Tab input#youtubeID").val("");else{var n=/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/;t=$(e).prev().attr("src").match(n),$("#video_Tab input#youtubeID").val(t[1]),$("#video_Tab input#vimeoID").val("")}},editIcon:function(){$("a#icon_Link").parent().show();var e=$.grep(this.activeElement.element.className.split(" "),function(e,t){return 0===e.indexOf("fa-")}).join(),t=$.grep(this.activeElement.element.className.split(" "),function(e,t){return 0===e.indexOf("ti-")}).join();$("select#icons option").each(function(){if($(this).val()===e||$(this).val()===t){if(s.activeElement.sandbox)var n=$(s.activeElement.element).attr("id");var a=$(this).val(),i=a.substring(0,3);"ti-"==i?(s.activeElement.sandbox&&$("#"+s.activeElement.sandbox).contents().find("#"+n).removeClass(t).addClass($(this).val()),$(".chosen-container-single .chosen-single span").removeClass("font-awesome"),$(".chosen-container-single .chosen-single span").addClass("themify")):(s.activeElement.sandbox&&$("#"+s.activeElement.sandbox).contents().find("#"+n).removeClass(e).addClass($(this).val()),$(".chosen-container-single .chosen-single span").removeClass("themify"),$(".chosen-container-single .chosen-single span").addClass("font-awesome")),$(this).prop("selected",!0),$("#icons").trigger("chosen:updated")}})},deleteElement:function(){var e,t=$(s.activeElement.element).parents().find("section").attr("id");if(void 0!=t)var n=t.substring(0,10),a=$(s.activeElement.element).parents(".owl-theme").length;e="A"===$(s.activeElement.element).prop("tagName")?"LI"===$(s.activeElement.element).parent().prop("tagName")?$(s.activeElement.element).parent():$(s.activeElement.element):"IMG"===$(s.activeElement.element).prop("tagName")?"A"===$(s.activeElement.element).parent().prop("tagName")?"portfolios"==n&&"0"==a?$(s.activeElement.element).parents("li"):$(s.activeElement.element).parent():"portfolios"==n&&"0"==a?$(s.activeElement.element).parents("li"):$(s.activeElement.element):$(s.activeElement.element),e.fadeOut(500,function(){$(this).closest("body").find("*:first");e.remove();var t=$(s.activeElement.element).attr("id");"portfolios"==n&&"0"==a?$("#"+s.activeElement.sandbox).contents().find("#"+t).parents("li").remove():$("#"+s.activeElement.sandbox).contents().find("#"+t).remove(),s.activeElement.parentBlock.heightAdjustment(),i.site.setPendingChanges(!0)}),$("#deleteElement").modal("hide"),s.closeStyleEditor();var o=$(s.activeElement.parentFrame).attr("id");"portfolios"==n&&"0"==a&&"IMG"===$(s.activeElement.element).prop("tagName")&&(document.getElementById(o).contentWindow.LoadIsotope(),document.getElementById(o).contentWindow.LoadLightboxInit());var l=$(s.activeElement.element).parents(".equalize").length;l>0&&document.getElementById(o).contentWindow.LoadEqualize()},cloneElement:function(){var e,n,a,o,l,r,c=$(s.activeElement.element).parents().find("section").attr("id");if(void 0!=c)var d=c.substring(0,10),m=$(s.activeElement.element).parents(".owl-theme").length;if($(s.activeElement.element).parent().hasClass("linkClone"))e=$(s.activeElement.element).parent().clone(!0,!0),n=$(s.activeElement.element).parent().clone(!0,!0),a=e.find($(s.activeElement.element).prop("tagName")),o=$(s.activeElement.element).parent(),l=$(s.activeElement.element).parent().parent();else if("portfolios"==d&&"IMG"===$(s.activeElement.element).prop("tagName"))e=$(s.activeElement.element).parents("li").clone(!0,!0),n=$(s.activeElement.element).parents("li").clone(!0,!0),a=e.find("img"),o=$(s.activeElement.element).parents("li"),l=$(s.activeElement.element).parents("li").parent();else if("A"===$(s.activeElement.element).parent().prop("tagName")&&"IMG"===$(s.activeElement.element).prop("tagName")&&0==m)e=$(s.activeElement.element).parent().clone(!0,!0),n=$(s.activeElement.element).parent().clone(!0,!0),a=e.find("img"),o=$(s.activeElement.element).parent(),l=$(s.activeElement.element).parent().parent();else{if(".fox-b-builder-bg-image"===$(s.activeElement.element).attr("data-selector")&&0!=m||"IMG"===$(s.activeElement.element).prop("tagName")&&0!=m)return alert("You cannot generate clone of slider, please add new slider from elements."),!1;var u=$(s.activeElement.element).children().find(".owl-theme").length;if(".fox-b-builder-bg-image"===$(s.activeElement.element).attr("data-selector")&&0!=u||".builder-bg"===$(s.activeElement.element).attr("data-selector")&&0!=u)return alert("You can't generate clone of slider, please add new slider from elements."),!1;e=$(s.activeElement.element).clone(!0,!0),n=$(s.activeElement.element).clone(!0,!0),a=e,o=$(s.activeElement.element),l=$(s.activeElement.element).parent()}o.after(e),s.activeElement.sandbox&&(r=$(s.activeElement.element).attr("id"),$("#"+s.activeElement.sandbox).contents().find("#"+r).after(n));var p=new t(a.get(0));if(p.activate(),s.activeElement.parentBlock.heightAdjustment(),i.site.setPendingChanges(!0),"portfolios"==d&&"0"==m&&"IMG"===$(s.activeElement.element).prop("tagName")){var g=$(s.activeElement.parentFrame).attr("id");document.getElementById(g).contentWindow.LoadIsotope(),document.getElementById(g).contentWindow.LoadLightboxInit()}},resetElement:function(){if($(s.activeElement.element).closest("body").width()!==$(s.activeElement.element).width())if(".fox-b-builder-bg-image"!==$(s.activeElement.element).attr("data-selector")||s.activeElement.sandbox)$(s.activeElement.element).attr("style",""),$(s.activeElement.element).css({outline:"2px dotted #f72727",cursor:"pointer"});else{var e=s._oldBGLG[$(s.activeElement.element).attr("id")],t=e.toString().split("url");if(""!=t[0])if(t[1].match(/elements/g))var n=t[1].toString().replace(/'/g,"").replace("(","").replace(")","").split("elements/"),a=n[1];else var n=t[1].toString().replace(/'/g,"").replace("(","").replace(")",""),a=n;else if(t[1].match(/elements/g))var n=t[1].toString().replace(/'/g,"").replace("(","").replace(")","").split("elements/"),a=n[1];else var n=t[1].toString().replace(/'/g,"").replace("(","").replace(")",""),a=n;$(s.activeElement.element).css("background-image",""),$(s.activeElement.element).css("background-image",a).promise().done(function(){setTimeout(function(){$(s.activeElement.element).css("background-image",e)},100)}),$(s.activeElement.element).css({outline:"2px dotted #f72727",cursor:"pointer"}),n&&$(".imageFileTab").find("input#imageURL").val(n)}else if(".fox-b-builder-bg-image"!==$(s.activeElement.element).attr("data-selector")||s.activeElement.sandbox)$(s.activeElement.element).attr("style",""),$(s.activeElement.element).css({outline:"2px dotted #f72727","outline-offset":"-3px",cursor:"pointer"});else{var e=s._oldBGLG[$(s.activeElement.element).attr("id")],t=e.toString().split("url");if(""!=t[0])if(t[1].match(/elements/g))var n=t[1].toString().replace(/'/g,"").replace("(","").replace(")","").split("elements/"),a=n[1];else var n=t[1].toString().replace(/'/g,"").replace("(","").replace(")",""),a=n;else if(t[1].match(/elements/g))var n=t[1].toString().replace(/'/g,"").replace("(","").replace(")","").split("elements/"),a=n[1];else var n=t[1].toString().replace(/'/g,"").replace("(","").replace(")",""),a=n;$(s.activeElement.element).css("background-image",""),$(s.activeElement.element).css("background-image",a).promise().done(function(){setTimeout(function(){$(s.activeElement.element).css("background-image",e)},100)}),$(s.activeElement.element).css({outline:"2px dotted #f72727","outline-offset":"-3px",cursor:"pointer"}),n&&$(".imageFileTab").find("input#imageURL").val(n)}if(s.activeElement.sandbox){var o=$(s.activeElement.element).attr("id");if(".fox-b-builder-bg-image"===$(s.activeElement.element).attr("data-selector")){var e=s._oldBGLG[$(s.activeElement.element).attr("id")],t=e.toString().split("url");if(""!=t[0])if(t[1].match(/elements/g))var n=t[1].toString().replace(/'/g,"").replace("(","").replace(")","").split("elements/"),a=n[1];else var n=t[1].toString().replace(/'/g,"").replace("(","").replace(")",""),a=n;else if(t[1].match(/elements/g))var n=t[1].toString().replace(/'/g,"").replace("(","").replace(")","").split("elements/"),a=n[1];else var n=t[1].toString().replace(/'/g,"").replace("(","").replace(")",""),a=n;$("#"+s.activeElement.sandbox).contents().find("#"+o).attr("style","background-image:"+e),$(s.activeElement.element).css("background-image",""),$(s.activeElement.element).css("background-image",a).promise().done(function(){setTimeout(function(){$(s.activeElement.element).css("background-image",e)},100)}),a&&$(".imageFileTab").find("input#imageURL").val(a)}else $("#"+s.activeElement.sandbox).contents().find("#"+o).attr("style","")}if($("#styleEditor form#stylingForm").height($("#styleEditor form#stylingForm").height()+"px"),$("#styleEditor form#stylingForm .form-group:not(#styleElTemplate)").fadeOut(500,function(){$(this).remove()}),void 0!==s._oldIcon[$(s.activeElement.element).attr("id")]){var l=$.grep(s.activeElement.element.className.split(" "),function(e,t){return 0===e.indexOf("fa-")}).join(),r=$.grep(s.activeElement.element.className.split(" "),function(e,t){return 0===e.indexOf("ti-")}).join();$(s.activeElement.element).removeClass(l).addClass(s._oldIcon[$(s.activeElement.element).attr("id")]),$(s.activeElement.element).removeClass(r).addClass(s._oldIcon[$(s.activeElement.element).attr("id")]),s.activeElement.sandbox&&($(s.activeElement.element).removeClass(l).addClass(s._oldIcon[$(s.activeElement.element).attr("id")]),$(s.activeElement.element).removeClass(r).addClass(s._oldIcon[$(s.activeElement.element).attr("id")])),$("select#icons option").each(function(){$(this).val()===s._oldIcon[$(s.activeElement.element).attr("id")]&&($(this).prop("selected",!0),$("#icons").trigger("chosen:updated"))})}setTimeout(function(){s.buildeStyleElements($(s.activeElement.element).attr("data-selector"))},550),i.site.setPendingChanges(!0)},resetSelectLinksPages:function(){$("#internalLinksDropdown").select2("val","#")},resetSelectLinksInternal:function(){$("#pageLinksDropdown").select2("val","#")},resetSelectAllLinks:function(){$("#internalLinksDropdown").select2("val","#"),$("#pageLinksDropdown").select2("val","#"),this.select()},hideFileUploads:function(){$("form#imageUploadForm").hide(),$("#imageModal #uploadTabLI").hide()},closeStyleEditor:function(){$("header").removeData("affix-top").addClass("affix"),Object.keys(s.activeElement).length>0&&(s.activeElement.removeOutline(),s.activeElement.activate()),"0px"===$("#styleEditor").css("left")&&s.toggleSidePanel("close")},toggleSidePanel:function(e){"open"===e&&"-300px"===$("#styleEditor").css("left")?$("#styleEditor").animate({left:"0px"},250):"close"===e&&"0px"===$("#styleEditor").css("left")&&$("#styleEditor").animate({left:"-300px"},250)},deActivateMode:function(){Object.keys(s.activeElement).length>0&&s.closeStyleEditor();for(var e=0;e<s.allStyleItemsOnCanvas.length;e++)s.allStyleItemsOnCanvas[e].deactivate()}};s.init(),n.styleeditor=s}()},{"../vendor/publisher":11,"./builder.js":2,"./canvasElement.js":3,"./config.js":4}],9:[function(e,t,n){!function(){"use strict";var e={firstMenuWidth:220,secondMenuWidth:300,loaderAnimation:document.getElementById("loader"),secondMenuTriggerContainers:$("#menu #main #elementCats, #menu #main #templatesUl"),siteUrl:siteUrl,baseUrl:baseUrl,setup:function(){$(e.loaderAnimation).fadeOut(function(){$("#menu").animate({left:-e.firstMenuWidth},1e3)}),$(".nav-tabs a").on("click",function(e){e.preventDefault(),$(this).tab("show")}),$("select.select").select2(),$(":radio, :checkbox").radiocheck(),$("[data-toggle=tooltip]").tooltip("hide"),$(".table .toggle-all :checkbox").on("click",function(){var e=$(this),t=e.prop("checked");e.closest(".table").find("tbody :checkbox").radiocheck(t?"check":"uncheck")}),$(".tooltip").addClass(function(){return $(this).prev().attr("data-tooltip-style")?"tooltip-"+$(this).prev().attr("data-tooltip-style"):void 0}),$(".btn-group").on("click","a",function(){$(this).siblings().removeClass("active").end().addClass("active")}),$(".input-group").on("focus",".form-control",function(){$(this).closest(".input-group, .form-group").addClass("focus")}).on("blur",".form-control",function(){$(this).closest(".input-group, .form-group").removeClass("focus")}),$(".table .toggle-all").on("click",function(){var e=$(this).find(":checkbox").prop("checked");$(this).closest(".table").find("tbody :checkbox").checkbox(e?"uncheck":"check")}),$(".table tbody :checkbox").on("check uncheck toggle",function(e){var t=$(this),n=t.prop("checked"),a="toggle"===e.type,i=$(".table tbody :checkbox"),o=i.length===i.filter(":checked").length;t.closest("tr")[n?"addClass":"removeClass"]("selected-row"),a&&t.closest(".table").find(".toggle-all :checkbox").checkbox(o?"check":"uncheck")}),$("[data-toggle='switch']").wrap('<div class="switch" />').parent().bootstrapSwitch(),e.secondMenuTriggerContainers.on("click","a:not(.btn)",e.secondMenuAnimation)},secondMenuAnimation:function(){$("#menu #main a").removeClass("active"),$(this).addClass("active"),$("#menu #second ul li").hide(),$("#menu #second ul li."+$(this).attr("id")).show(),"all"===$(this).attr("id")&&$("#menu #second ul#elements li").show(),$(".menu .second").css("display","block").stop().animate({width:e.secondMenuWidth},500)}};e.setup(),t.exports.appUI=e}()},{}],10:[function(e,t,n){!function(){"use strict";n.getRandomArbitrary=function(e,t){return Math.floor(Math.random()*(t-e)+e)}}()},{}],11:[function(e,t,n){!function(e,a){if("object"==typeof n)t.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var i=e.publisher,o=e.publisher=a();e.publisher.noConflict=function(){return e.publisher=i,o}}}(this,function(){var e=function(e){function t(t,n,a){var i={handler:n,context:a||e};return t=s[t]||(s[t]=[]),t.push(i),{attach:function(){return t.push(i),this},detach:function(){return o(t,i),this}}}function n(e){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=t(a,e[a]));return n}function a(e,n){return t(n,e[n],e)}function i(e,t){for(var n=[],i=0,o=t.length;o>i;i++)n.push(a(e,t[i]));return n}function o(e,t){for(var n=0,a=e.length;a>n;n++)e[n]===t&&e.splice(n,1)}var s={};return e=e||{},e.publish=function(t){if(!s[t])return e;for(var n=[].slice.call(arguments,1),a=0,i=s[t].length;i>a;a++)s[t][a].handler.apply(s[t][a].context,n);return e},e.subscribe=function(e,o){var s=typeof e;return"string"===s?t.apply(null,arguments):"object"!==s||o?"string"==typeof o?a.apply(null,arguments):i.apply(null,arguments):n.apply(null,arguments)},e};return e(e)})},{}]},{},[1]);